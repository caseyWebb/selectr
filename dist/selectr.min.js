(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};!function(b,c){var d;return d=function(){function d(c,d){this.source=c,this.args=d,this.updateFooter=a(this.updateFooter,this),this.deselectOption=a(this.deselectOption,this),this.selectOption=a(this.selectOption,this),this.triggerChange=a(this.triggerChange,this),this.args=b.extend({},this.defaults,this.args,this.source.data("selectr-opts")),this.multi=this.source.prop("multiple"),this.createSelectr(),this.monitorSource(),this.selectrContainer.insertAfter(this.source),this.selectrContainer=b(this.source.next()),this.bindEventListeners(),this.source.hide()}return d.prototype.defaults={title:"Select Options",noMatchingOptionsText:"No options found",placeholder:"Search",resetText:"Clear All",width:"300px",maxListHeight:"250px",tooltipBreakpoint:25,maxSelection:1/0,panelStyle:"default",alwaysShowFooter:!1},d.prototype.createSelectr=function(){return this.selectrContainer=this.createContainer(),b(".list-group",this.selectrContainer).append(this.createOpts()),this.updateFooter()},d.prototype.createContainer=function(){return b(document.createElement("div")).addClass("selectr panel panel-"+this.args.panelStyle+" "+(this.multi?"multi":void 0)).css("width",this.args.width).html("<div class='panel-heading "+(""===this.args.title?"no-title":void 0)+"'> <h4 class='panel-title'> "+this.args.title+" </h4> </div> <div class='panel-body'> <input class='form-control' placeholder='"+this.args.placeholder+"'> <span class='clear-search hidden'>&times;</span> </div> <ul class='list-group' style='max-height: "+this.args.maxListHeight+"'> </ul> <div class='no-matching-options hidden'> <strong>"+this.args.noMatchingOptionsText+"</strong> </div> <div class='panel-footer "+(this.multi||this.args.alwaysShowFooter?void 0:"hidden")+"'> <button class='reset btn btn-sm btn-default'> "+this.args.resetText+" </button> "+(this.multi?"<span class='current-selection badge'></span>":"")+" </div>")},d.prototype.createOpts=function(){var a,c,d,e,f;for(e=b("option",this.source),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(b(document.createElement("li")).addClass("list-group-item "+(b(a).is(":selected")?"selected":void 0)).data("val",b(a).val()).append(b(document.createElement("div")).addClass("color-code "+(b(a).data("selectr-color")?void 0:"no-color")).css("background-color",b(a).data("selectr-color"))).append(b(document.createElement("div")).text(b(a).text()).addClass("option-name").attr({title:b(a).text().length>this.args.tooltipBreakpoint?b(a).text():""})).append(b(document.createElement("div")).html("&times").addClass("add-remove "+(this.multi?void 0:"hidden"))));return f},d.prototype.monitorSource=function(){var a,d,e;return e=function(a){return function(){var c;return c=b(document.createElement("ul")).addClass("list-group").css("max-height",a.args.maxListHeight).append(a.createOpts()),b(".list-group",a.selectrContainer).replaceWith(c),a.updateFooter()}}(this),this.source.on("change",function(a,b){return"selectrInitiated"!==b?e():void 0}),a=c.MutationObserver||c.WebKitMutationObserver||c.MozMutationObserver,null!=a?(d=new a(function(a){return b.each(a,e)}),d.observe(this.source.get(0),{attributes:!1,childList:!0,subtree:!0})):void 0},d.prototype.bindEventListeners=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o;return h=this.multi,l=this.selectrContainer,m=this.source,k=this.selectOption,f=this.deselectOption,n=this.triggerChange,o=this.updateFooter,g=function(a){var c,d;return a.stopPropagation(),2!==(null!=(d=a.originalEvent)?d.detail:void 0)?(c=(a.ctrlKey||a.metaKey)&&h,b(this).hasClass("selected")&&(c||0===b(this).siblings(".selected").length)&&h?f(this):k(c,this)):void 0},a=function(a){var c;return a.stopPropagation(),a.originalEvent.detail&&2===a.originalEvent.detail?void 0:(c=b(a.target).parents(".list-group-item"),c.hasClass("selected")?f(c):k(!0,c))},j=function(a){var c,d,e,f;return a.stopPropagation(),e=new RegExp(b(this).val().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i"),f=!0,b(".list-group-item",l).each(function(a,c){b(c).text().match(e)?(b(c).removeClass("hidden"),f=!1):b(c).addClass("hidden")}),c=b(".clear-search",l),b(this).val().length>0?c.removeClass("hidden"):c.addClass("hidden"),d=b(".no-matching-options",l),f?d.removeClass("hidden"):d.addClass("hidden")},c=function(){return b(this).siblings("input").val("").trigger("change")},i=function(){return l.find("ul > li").removeClass("selected"),b("option",m).prop("selected",!1),n(m),o()},d=function(a){return a.ctrlKey?b(".list-group",l).addClass("ctrl-key"):void 0},e=function(a){return a.ctrlKey?void 0:b(".list-group",l).removeClass("ctrl-key")},b(l).on("click",".list-group-item",g),b(l).on("click",".add-remove",a),b(l).on("click change keyup",".form-control",j),b(l).on("click",".clear-search",c),b(l).on("click",".reset",i),b(document).on("keydown",d),b(document).on("keyup",e)},d.prototype.triggerChange=function(){return this.source.trigger("change",["selectrInitiated"])},d.prototype.selectOption=function(a,c){var d,e,f,g;if(!(this.args.maxSelection<=b(c).siblings(".selected").length&&a)){if(!a)for(b("option",this.source).prop("selected",!1),g=b(c).siblings(),e=0,f=g.length;f>e;e++)d=g[e],b(d).removeClass("selected");return b(c).addClass("selected"),b("option[value="+b(c).data("val")+"]",this.source).prop("selected",!0),this.updateFooter(),this.triggerChange()}},d.prototype.deselectOption=function(a){return this.selectrContainer.removeClass("max-selection-reached"),b(a).removeClass("selected"),b("option[value="+b(a).data("val")+"]",this.source).prop("selected",!1),this.updateFooter(),this.triggerChange()},d.prototype.updateFooter=function(){var a,c;if(this.multi&&(c=b("option:selected",this.source).length,b(".current-selection",this.selectrContainer).text(c>0?c:""),c===this.args.maxSelection?this.selectrContainer.addClass("max-selection-reached"):this.selectrContainer.removeClass("max-selection-reached"),!this.args.alwaysShowFooter))return a=b(".panel-footer",this.selectrContainer),0===c?a.addClass("hidden"):a.removeClass("hidden")},d}(),b.fn.extend({selectr:function(a){return this.each(function(){var c;return c=b(this),c.data("selectr-initialized")?void 0:(new d(c,a),c.data("selectr-initialized",!0))})}})}(jQuery,this)}).call(this);